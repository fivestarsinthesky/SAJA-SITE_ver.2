<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<title>사자왕자의 노래방 | 포스터 그리드</title>
<style>
  body {
    margin:0;
    font-family: system-ui, "Noto Sans KR", sans-serif;
    background: #fff url('./assets/poster.jpeg') no-repeat center center fixed;
    background-size: 100% 100%;
    color:#111;
    min-height: 100vh;
  }
  .title-fixed{position:fixed;top:0;left:0;width:100vw;z-index:1000;}
  .title-bar{display:flex;align-items:center;justify-content:space-between;padding:12px;}
  .title-ghost{width:80px;opacity:0;}
  .title-right{width:100px;}

  /* === 모바일 전용 무빙타이틀 (넘칠 때만) === */
  @media (max-width: 768px) {
    #detailTitleMarquee.marquee-viewport {
      position: relative;
      overflow: hidden;
      white-space: nowrap;
      text-overflow: clip;
    }
    #detailTitleMarquee .marquee-track {
      display: inline-block;
      will-change: transform;
    }
    #detailTitleMarquee .marquee-text {
      display: inline-block;
      padding-right: 24px;
    }
    #detailTitleMarquee.marquee--on .marquee-track {
      animation: marquee linear infinite;
      animation-duration: var(--marquee-duration, 12s);
      animation-delay: 0s;
    }
    @keyframes marquee {
      from { transform: translateX(0); }
      to   { transform: translateX(calc(-1 * var(--scroll-distance, 0px))); }
    }
  }
</style>
</head>
<body>
  <div class="title-fixed">
    <div class="title-bar">
      <div class="title-ghost"></div>
      <h1 id="titleText" style="font-size:18px;font-weight:700;margin:0;color:#111;">
        사자왕자의 노래방 · (데모) 긴 제목일 경우 모바일에서 좌측부터 무빙 시작!
      </h1>
      <img class="title-right" src="./title2.png" alt="사자왕자 캐릭터(오른쪽)">
    </div>
  </div>

  <main class="wrap">
    <div class="grid" id="grid"></div>
    <div class="page-footer">
      <span>팬 콘텐츠 · © 2025. 눈물많은 T상자.</span>
      <span>Fan-made · All original content belongs to lionprince.x.</span>
    </div>
  </main>

  <!-- === 모바일 전용 무빙타이틀 JS === -->
  <script>
  (function() {
    const SPEED = 60; 
    const MOBILE = window.matchMedia('(max-width: 768px)');
    const original = document.getElementById('titleText');
    if (!original) return;

    const viewport = document.createElement('div');
    viewport.id = 'detailTitleMarquee';
    viewport.className = 'marquee-viewport';
    const track = document.createElement('div');
    track.className = 'marquee-track';

    const span = document.createElement('span');
    span.className = 'marquee-text';
    span.textContent = original.textContent.trim();

    const ghost = document.createElement('span');
    ghost.className = 'marquee-text marquee-ghost';
    ghost.setAttribute('aria-hidden', 'true');
    ghost.textContent = span.textContent;

    track.appendChild(span);
    track.appendChild(ghost);
    viewport.appendChild(track);
    original.replaceWith(viewport);

    function update() {
      const isMobile = MOBILE.matches;
      const vpW = viewport.clientWidth;
      const textW = span.scrollWidth;
      if (isMobile && textW > vpW + 1) {
        const gap = 24;
        viewport.classList.add('marquee--on');
        const distance = textW + gap;
        const duration = Math.max(6, distance / SPEED);
        viewport.style.setProperty('--scroll-distance', distance + 'px');
        viewport.style.setProperty('--marquee-duration', duration + 's');
      } else {
        viewport.classList.remove('marquee--on');
        track.style.transform = 'translateX(0)';
      }
    }

    const ro = new ResizeObserver(update);
    ro.observe(viewport);
    MOBILE.addEventListener('change', update);
    requestAnimationFrame(update);
  })();
  </script>
</body>
</html>