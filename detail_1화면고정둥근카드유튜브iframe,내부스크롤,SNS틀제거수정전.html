<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>상세 페이지</title>
<style>
  /* 1) 페이지 자체는 한 화면 고정: 스크롤 없음 */
  html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    overflow: hidden; /* 페이지 스크롤 제거 */
    background: #000; /* 필요 시 변경 */
    color: #fff;
    font-family: system-ui, "Noto Sans KR", sans-serif;
  }

  /* 2) PC: 좌우 2분할(영상 / 내용), 모바일: 상하 2분할 */
  .shell {
    display: grid;
    width: 100vw;
    height: 100vh;
    grid-template-columns: 58% 42%;
    grid-template-rows: 100%;
  }
  @media (max-width: 900px) {
    .shell {
      grid-template-columns: 100%;
      grid-template-rows: 50% 50%;
    }
  }

  /* 3) 왼쪽: 유튜브 영역 (반응형 16:9) */
  .yt-wrap {
    position: relative;
    width: 100%;
    height: 100%;
    background: #000;
  }
  .yt-inner {
    position: absolute;
    inset: 0;
    display: grid;
    place-items: center;
  }
  /* 16:9 박스: 가로/세로 어느 쪽이든 최대치로 맞추기 */
  .yt-box {
    width: 100%;
    height: 100%;
  }
  .yt-box iframe {
    width: 100%;
    height: 100%;
    border: 0;
    display: block;
  }

  /* 4) 오른쪽(또는 아래): 스크롤 가능한 외부/내부 페이지 */
  .pane {
    position: relative;
    width: 100%;
    height: 100%;
    background: #111; /* 필요 시 투명/이미지 등으로 교체 */
    overflow: hidden; /* iframe 자체 스크롤 사용 */
  }
  .pane iframe {
    width: 100%;
    height: 100%;
    border: 0;
    display: block;
    /* iframe 내부 페이지의 스크롤은 iframe 안에서 표시됨 */
  }

  /* 상단 미니 헤더(선택): 닫기/이동 버튼 등 둘 자리 */
  .toolbar {
    position: fixed;
    top: 8px; left: 8px;
    z-index: 10;
    display: flex; gap: 8px;
  }
  .toolbar a, .toolbar button {
    appearance: none;
    background: rgba(255,255,255,.12);
    border: 1px solid rgba(255,255,255,.2);
    color: #fff;
    border-radius: 10px;
    padding: 8px 12px;
    font-size: 13px;
    cursor: pointer;
    text-decoration: none;
  }
</style>
</head>
<body>
  <div class="toolbar">
    <a href="./index.html">← 목록으로</a>
  </div>

  <main class="shell">
    <!-- 왼쪽: 유튜브(또는 동영상) -->
    <section class="yt-wrap">
      <div class="yt-inner">
        <div class="yt-box">
          <iframe id="yt" src="" title="YouTube video player"
                  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                  allowfullscreen></iframe>
        </div>
      </div>
    </section>

    <!-- 오른쪽/아래: 스크롤 가능한 가사/더보기 등의 페이지 -->
    <aside class="pane">
      <iframe id="page" src="" title="상세 내용"></iframe>
    </aside>
  </main>

  <script>
    // URL 파라미터 파싱
    const params = new URLSearchParams(location.search);

    // 1) 유튜브 소스 결정
    // 우선순위: yt(완전 URL) > ytid(영상 ID) > embed 기본값
    let ytSrc = "";
    const ytParam = params.get("yt");
    const ytId = params.get("ytid");
    if (ytParam) {
      ytSrc = ytParam;
    } else if (ytId) {
      ytSrc = "https://www.youtube.com/embed/" + encodeURIComponent(ytId);
    } else {
      // 기본값(데모)
      ytSrc = "https://www.youtube.com/embed/dQw4w9WgXcQ";
    }
    // 자동재생/브랜드 미니멀 옵션 등 필요 시 쿼리 추가 가능
    if (!ytSrc.includes("autoplay=")) {
      ytSrc += (ytSrc.includes("?") ? "&" : "?") + "rel=0";
    }
    document.getElementById("yt").src = ytSrc;

    // 2) 오른쪽/아래 페이지 소스 결정
    // 우선순위: page(완전 URL) > local(상대경로) > 기본 가이드 페이지
    let pageSrc = params.get("page") || params.get("local");
    if (!pageSrc) {
      // 기본 안내 페이지(스크롤 테스트용 긴 페이지)
      const demo = `data:text/html;charset=utf-8,` + encodeURIComponent(`
        <!doctype html>
        <html lang="ko"><head><meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>스크롤 가능한 영역</title>
        <style>
          body{margin:0;padding:20px;color:#fff;background:#181818;font-family:system-ui,"Noto Sans KR",sans-serif;line-height:1.6}
          h1{margin:0 0 12px 0;font-size:20px}
          p{margin:0 0 16px 0}
          .long{height:140vh;background:linear-gradient(180deg,#222,#333);border-radius:12px;margin:16px 0}
        </style></head>
        <body>
          <h1>여기는 "가사/더보기"가 들어갈 프레임입니다.</h1>
          <p>이 프레임 내부는 스크롤이 가능하고, 상세페이지(전체)는 한 화면에 고정입니다.</p>
          <div class="long"></div>
          <p>외부 URL 또는 프로젝트 내부 경로를 page= 파라미터로 전달하면 해당 페이지가 로드됩니다.</p>
        </body></html>
      `);
      pageSrc = demo;
    }
    document.getElementById("page").src = pageSrc;
  </script>
</body>
</html>
